>proxy temp/proxyProxy set up at localhost:4456
>source '/afs/andrew.cmu.edu/usr18/sarthak3/proxylab-m18-sarthakjain27/tests/C05-multi-server1.cmd'># Make sure caches for different servers are not mixed
>serve s1 s2
Server s1 running at localhost:4457
Server s2 running at localhost:4458
>generate random-text1.txt 100K
>generate random-text2.txt 100K
>generate random-text3.txt 100K
>fetch f1a random-text1.txt s1
Client: Fetching '/random-text1.txt' from localhost:4457
Proxy stderr: host localhost uri http://localhost:4457 def_port 4457
>fetch f2a random-text2.txt s1
Client: Fetching '/random-text2.txt' from localhost:4457
Proxy stderr: GET /random-text1.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
>fetch f3a random-text3.txt s1
Client: Fetching '/random-text3.txt' from localhost:4457
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4457
Proxy stderr: Request-ID: f1a
Proxy stderr: Response: Immediate
>delay 100
Proxy stderr: 
Proxy stderr: 
Proxy stderr: Returned from check presence with present node (nil)
Proxy stderr: Request not present in cache
Proxy stderr: writing the request headers to server GET /random-text1.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4457
Proxy stderr: Request-ID: f1a
Proxy stderr: Response: Immediate
Proxy stderr: 
Proxy stderr: 
Proxy stderr: entering loop to read response from server
Proxy stderr: host localhost uri http://localhost:4457 def_port 4457
Proxy stderr: GET /random-text2.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4457
Proxy stderr: Request-ID: f2a
Proxy stderr: Response: Immediate
Proxy stderr: 
Proxy stderr: 
Proxy stderr: Returned from check presence with present node (nil)
Proxy stderr: Request not present in cache
Proxy stderr: writing the request headers to server GET /random-text2.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4457
Proxy stderr: Request-ID: f2a
Proxy stderr: Response: Immediate
Proxy stderr: 
Proxy stderr: 
Proxy stderr: entering loop to read response from server
Proxy stderr: While loop entered
Proxy stderr: host localhost uri http://localhost:4457 def_port 4457
Proxy stderr: GET /random-text3.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4457
Proxy stderr: Request-ID: f3a
Proxy stderr: Response: Immediate
Proxy stderr: 
Proxy stderr: 
Proxy stderr: Returned from check presence with present node (nil)
Proxy stderr: Request not present in cache
Proxy stderr: writing the request headers to server GET /random-text3.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4457
Proxy stderr: Request-ID: f3a
Proxy stderr: Response: Immediate
Proxy stderr: 
Proxy stderr: 
Proxy stderr: entering loop to read response from server
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: New request inserted in cache uri_w/o_path http://localhost:4457 path /random-text2.txt port 4457 and size 100111
Proxy stderr: total request in cache 1
Proxy stderr: total cache size 100111
Proxy stderr: While loop entered
Proxy stderr: New request inserted in cache uri_w/o_path http://localhost:4457 path /random-text1.txt port 4457 and size 100111
Proxy stderr: total request in cache 2
Proxy stderr: total cache size 200222
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: New request inserted in cache uri_w/o_path http://localhost:4457 path /random-text3.txt port 4457 and size 100111
Proxy stderr: total request in cache 3
Proxy stderr: total cache size 300333
>check f1a
Request f1a yielded expected status 'ok'
>check f2a
Request f2a yielded expected status 'ok'
>check f3a
Request f3a yielded expected status 'ok'
># Make sure caching occurred
>request r1a random-text1.txt s1
Client: Requesting '/random-text1.txt' from localhost:4457
>delay 100
Proxy stderr: host localhost uri http://localhost:4457 def_port 4457
Proxy stderr: GET /random-text1.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4457
Proxy stderr: Request-ID: r1a
Proxy stderr: Response: Deferred
Proxy stderr: 
Proxy stderr: 
Proxy stderr: Returned from check presence with present node 0x7f3c88008a00
Proxy stderr: Request present in cache
Proxy stderr: Calling delete node
Proxy stderr: returned from delete node, calling insert
>check r1a
Request r1a yielded expected status 'ok'
>delete random-text1.txt
>delete random-text2.txt
>delete random-text3.txt
>generate random-text1.txt 99K
>generate random-text2.txt 99K
>generate random-text3.txt 99K
>request r1b random-text1.txt s2
Client: Requesting '/random-text1.txt' from localhost:4458
>request r2b random-text2.txt s2
Client: Requesting '/random-text2.txt' from localhost:4458
Proxy stderr: returned from insert fronthost localhost uri http://localhost:4458 def_port 4458
Proxy stderr: GET /random-text1.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
>request r3b random-text3.txt s2
Proxy stderr: Connection: close
Client: Requesting '/random-text3.txt' from localhost:4458
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4458
Proxy stderr: Request-ID: r1b
>delay 100
Proxy stderr: Response: Deferred
Proxy stderr: 
Proxy stderr: 
Proxy stderr: Returned from check presence with present node (nil)
Proxy stderr: Request not present in cache
Proxy stderr: writing the request headers to server GET /random-text1.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4458
Proxy stderr: Request-ID: r1b
Proxy stderr: Response: Deferred
Proxy stderr: 
Proxy stderr: 
Proxy stderr: entering loop to read response from server
Proxy stderr: host localhost uri http://localhost:4458 def_port 4458
Proxy stderr: GET /random-text2.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4458
Proxy stderr: Request-ID: r2b
Proxy stderr: Response: Deferred
Proxy stderr: 
Proxy stderr: 
Proxy stderr: Returned from check presence with present node (nil)
Proxy stderr: Request not present in cache
Proxy stderr: writing the request headers to server GET /random-text2.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4458
Proxy stderr: Request-ID: r2b
Proxy stderr: Response: Deferred
Proxy stderr: 
Proxy stderr: 
Proxy stderr: entering loop to read response from server
Proxy stderr: host localhost uri http://localhost:4458 def_port 4458
Proxy stderr: GET /random-text3.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4458
Proxy stderr: Request-ID: r3b
Proxy stderr: Response: Deferred
Proxy stderr: 
Proxy stderr: 
Proxy stderr: Returned from check presence with present node (nil)
Proxy stderr: Request not present in cache
Proxy stderr: writing the request headers to server GET /random-text3.txt HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:4458
Proxy stderr: Request-ID: r3b
Proxy stderr: Response: Deferred
Proxy stderr: 
Proxy stderr: 
Proxy stderr: entering loop to read response from server
>respond r3b r2b r1b
Server responded to request r3b with status ok
Server responded to request r2b with status ok
Server responded to request r1b with status ok
>delay 100
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: New request inserted in cache uri_w/o_path http://localhost:4458 path /random-text1.txt port 4458 and size 99110
Proxy stderr: total request in cache 4
Proxy stderr: total cache size 399443
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: New request inserted in cache uri_w/o_path http://localhost:4458 path /random-text2.txt port 4458 and size 99110
Proxy stderr: total request in cache 5
Proxy stderr: total cache size 498553
Proxy stderr: New request inserted in cache uri_w/o_path http://localhost:4458 path /random-text3.txt port 4458 and size 99110
Proxy stderr: total request in cache 6
Proxy stderr: total cache size 597663
>check r1b
Request r1b yielded expected status 'ok'
>check r2b
Request r2b yielded expected status 'ok'
>check r3b
Request r3b yielded expected status 'ok'
>quit
ALL TESTS PASSED
