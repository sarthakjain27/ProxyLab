>proxy temp/proxyProxy set up at localhost:22320
>source '/afs/andrew.cmu.edu/usr18/sarthak3/proxylab-m18-sarthakjain27/tests/C03-basic-binary-cache.cmd'># Test ability to retrieve binary file from cache
>serve s1
Server s1 running at localhost:22321
>generate random-binary1.bin 10K
>generate random-binary2.bin 1K
>request r1a random-binary1.bin s1
Client: Requesting '/random-binary1.bin' from localhost:22321
>request r2 random-binary2.bin s1
Client: Requesting '/random-binary2.bin' from localhost:22321
Proxy stderr: host localhost uri http://localhost:22321 def_port 22321
Proxy stderr: GET /random-binary1.bin HTTP/1.0
>delay 100
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:22321
Proxy stderr: Request-ID: r1a
Proxy stderr: Response: Deferred
Proxy stderr: 
Proxy stderr: 
Proxy stderr: Returned from check presence with present node (nil)
Proxy stderr: Request not present in cache
Proxy stderr: writing the request headers to server GET /random-binary1.bin HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:22321
Proxy stderr: Request-ID: r1a
Proxy stderr: Response: Deferred
Proxy stderr: 
Proxy stderr: 
Proxy stderr: entering loop to read response from server
Proxy stderr: host localhost uri http://localhost:22321 def_port 22321
Proxy stderr: GET /random-binary2.bin HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:22321
Proxy stderr: Request-ID: r2
Proxy stderr: Response: Deferred
Proxy stderr: 
Proxy stderr: 
Proxy stderr: Returned from check presence with present node (nil)
Proxy stderr: Request not present in cache
Proxy stderr: writing the request headers to server GET /random-binary2.bin HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:22321
Proxy stderr: Request-ID: r2
Proxy stderr: Response: Deferred
Proxy stderr: 
Proxy stderr: 
Proxy stderr: entering loop to read response from server
>respond r2 r1a
Server responded to request r2 with status ok
Server responded to request r1a with status ok
>delay 200
Proxy stderr: While loop entered
Proxy stderr: New request inserted in cache uri_w/o_path http://localhost:22321 path /random-binary2.bin port 22321 and size 1122
Proxy stderr: total request in cache 1
Proxy stderr: total cache size 1122
Proxy stderr: While loop entered
Proxy stderr: While loop entered
Proxy stderr: New request inserted in cache uri_w/o_path http://localhost:22321 path /random-binary1.bin port 22321 and size 10124
Proxy stderr: total request in cache 2
Proxy stderr: total cache size 11246
>check r1a
Request r1a yielded expected status 'ok'
>check r2
Request r2 yielded expected status 'ok'
>request r1b random-binary1.bin s1
Client: Requesting '/random-binary1.bin' from localhost:22321
>delay 200
Proxy stderr: host localhost uri http://localhost:22321 def_port 22321
Proxy stderr: GET /random-binary1.bin HTTP/1.0
Proxy stderr: User Agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20180601 Firefox/45.0
Proxy stderr: Connection: close
Proxy stderr: Proxy-Connection: close
Proxy stderr: Host: localhost:22321
Proxy stderr: Request-ID: r1b
Proxy stderr: Response: Deferred
Proxy stderr: 
Proxy stderr: 
Proxy stderr: Returned from check presence with present node 0x7f2d24008a00
Proxy stderr: Request present in cache
Proxy stderr: Calling delete node
Proxy stderr: returned from delete node, calling insert
>check r1b
ERROR: Request r1b generated status 'error'.  Expecting 'ok' (Mismatch between source file ./source_files/random/random-binary1.bin and response file ./response_files/r1b-random-binary1.bin at position 33: hex 0x0 != hex 0xd3)
>quit
Proxy stderr: returned from insert front
ERROR COUNT = 1
